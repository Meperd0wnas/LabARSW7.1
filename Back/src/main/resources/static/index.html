<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blueprints</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/webjars/bootstrap/5.1.3/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h1 class="mb-4">Blueprints Application</h1>

    <!-- Captura de autor -->
    <div class="mb-3">
        <label for="input-author" class="form-label">Autor:</label>
        <input type="text" id="input-author" class="form-control" placeholder="Ingrese nombre del autor">
    </div>

    <!-- Botones Get Blueprints y cambio de backend -->
    <div class="mb-3">
        <button id="btn-get-blueprints" class="btn btn-primary">Get blueprints</button>
        <button id="btn-backend-mock" class="btn btn-secondary btn-sm">Usar Mock</button>
        <button id="btn-backend-api" class="btn btn-secondary btn-sm">Usar API Real</button>
    </div>

    <!-- Campo autor seleccionado -->
    <div class="mb-3">
        <strong>Autor seleccionado: </strong>
        <span id="selected-author">-</span>
    </div>

    <!-- Tabla de planos -->
    <table id="blueprints-table" class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th>Nombre del Plano</th>
                <th>Número de Puntos</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <!-- Canvas para dibujar -->
    <div class="mb-3">
        <canvas id="blueprints-canvas" width="400" height="400" style="border:1px solid #000;"></canvas>
    </div>

    <!-- Total de puntos -->
    <div class="mt-3">
        <strong>Total de puntos: </strong>
        <span id="total-points">0</span>
    </div>
</div>

<!-- jQuery y Bootstrap -->
<script src="/webjars/jquery/3.6.0/jquery.min.js"></script>
<script src="/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>

<!-- Módulos -->
<script src="js/apimock.js"></script>
<script src="js/apiclient.js"></script>
<script src="js/app.js"></script>

<script>
$(document).ready(function() {
    // Toggle backend
    $('#btn-backend-mock').click(() => {
        BlueprintsModule.setBackend(BlueprintsMockModule);
        alert("Backend cambiado a MOCK");
    });
    $('#btn-backend-api').click(() => {
        BlueprintsModule.setBackend(BlueprintsApiClient);
        alert("Backend cambiado a API real");
    });

    // Botón Get Blueprints
    $('#btn-get-blueprints').click(function() {
        const author = $('#input-author').val();
        if (!author) {
            alert('Por favor ingrese un autor');
            return;
        }
        BlueprintsModule.updateBlueprintsByAuthor(author);
    });
});
</script>
</body>
</html>
